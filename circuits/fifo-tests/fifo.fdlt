(load "circuits/fifo.fdl")
(red input i)
(red output o)
(red input push)
(red input pop)
(red input reset)
(red output errors)
(part-under-test (fifo-5
                   i
                   o
                   push
                   pop
                   reset
                   errors
                   sig:signal-d
                   sig:signal-c
                   sig:signal-r
                   sig:signal-e))
(test-type fixed-latency 3)

(test (((i sig:signal-d)
        (push sig:signal-c)
        (pop sig:signal-c)
        (reset sig:signal-r))
       ((o sig:signal-d)
        (errors sig:signal-e)))
  ((0 0 0 1) (* *))
  ((0 0 0 0) (* 0))
  ((1 1 0 0) (* 0))
  ((0 0 0 0) (* 0))
  ((0 0 1 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((2 1 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 0 0) (1 0))
  ((0 0 1 0) (2 0))
  ((0 0 0 0) (2 0))
  ((3 1 1 0) (3 0))
  ((4 1 1 0) (4 0))
  ((5 1 1 0) (5 0))
  ((6 1 1 0) (6 0))
  ((7 1 1 0) (7 0))
  ((8 1 1 0) (8 0))
  ((9 1 1 0) (9 0))
  ((10 1 1 0) (10 0))
  ((11 1 1 0) (11 0))
  ((12 1 1 0) (12 0))
  ((13 1 1 0) (13 0))
  ((14 1 0 0) (13 0))
  ((15 1 0 0) (13 0))
  ((16 1 0 0) (13 0))
  ((0 0 0 0) (13 0))
  ((0 0 0 0) (13 0))
  ((0 0 0 0) (13 0))
  ((0 0 0 0) (13 0))
  ((0 0 0 0) (13 0))
  ((0 0 0 0) (13 0))
  ((0 0 1 0) (14 0))
  ((0 0 1 0) (15 0))
  ((0 0 1 0) (16 0))
  ((17 1 1 0) (17 0))
  ((0 0 1 0) (* 1)))
